<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>d_etteiu8383 Playground</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <meta name='author' content='d_etteiu8383'>
    <link rel="shortcut icon" href="https://detteiu8383.github.io/icon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="https://detteiu8383.github.io/icon/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="https://detteiu8383.github.io/icon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="https://detteiu8383.github.io/icon/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="https://detteiu8383.github.io/icon/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="https://detteiu8383.github.io/icon/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="https://detteiu8383.github.io/icon/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="https://detteiu8383.github.io/icon/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="https://detteiu8383.github.io/icon/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://detteiu8383.github.io/icon/apple-touch-icon-180x180.png" />
    <meta property="og:url" content="https://detteiu8383.github.io/playground/334timer.html" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="d_etteiu8383 Portfolio" />
    <meta property="og:description" content="d_etteiu8383の自己紹介ページ" />
    <meta property="og:site_name" content="d_etteiu8383 Portfolio" />
    <meta property="og:image" content="https://detteiu8383.github.io/images/334timer.png" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@d_etteiu8383" />
    <meta name="twitter:title" content="d_etteiu8383 Portfolio" />
    <meta name="twitter:description" content="でっていうの自己紹介ページ" />
    <meta name="twitter:image" content="https://detteiu8383.github.io/images/334timer.png" />
    <link rel='stylesheet' type='text/css' media='screen' href='../style.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='./334timer.css'>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Noto+Sans+JP:400,700" rel="stylesheet">
    <script>console.log("\n" + 
        "    _      _                                         ____    _             _                                      _ \n" +
        "   / \\    (_)  _ __ ___     ___    _ __     ___     |  _ \\  (_)  _ __     (_)  ___      ___    ___    _ __ ___   (_)  _ __     __ _     ___    ___     ___    _ __ \n" +
        "  / _ \\   | | | '_ ` _ \\   / _ \\  | '_ \\   / _ \\    | |_) | | | | '_ \\    | | / __|    / __|  / _ \\  | '_ ` _ \\  | | | '_ \\   / _` |   / __|  / _ \\   / _ \\  | '_ \\ \n" +
        " / ___ \\  | | | | | | | | | (_) | | | | | | (_) |   |  _ <  | | | | | |   | | \\__ \\   | (__  | (_) | | | | | | | | | | | | | | (_| |   \\__ \\ | (_) | | (_) | | | | |  _   _   _ \n" +
        "/_/   \\_\\ |_| |_| |_| |_|  \\___/  |_| |_|  \\___/    |_| \\_\\ |_| |_| |_|   |_| |___/    \\___|  \\___/  |_| |_| |_| |_| |_| |_|  \\__, |   |___/  \\___/   \\___/  |_| |_| (_) (_) (_) \n" +
        "                                                                                                                              |___/ \n");</script>
</head>
<body>

    <!--header-->

    <header>
        <div class="vertical_alien">
            <img src="../images/logo.png" alt="page logo" id="page_logo">
            <div class="page_title">
                <h1>d_etteiu8383 Portfolio</h1>
            </div>
        </div>
        <div id="menu">
            <nav>
                <ul>
                    <li><a href="https://detteiu8383.github.io/index.html#about">About</a></li>
                    <li><a href="https://detteiu8383.github.io/index.html#works">Works</a></li>
                    <li><a href="https://detteiu8383.github.io/index.html#links">Links</a></li>
                    <li><a href="https://detteiu8383.github.io/index.html#playground">PlayGround</a></li>
                </ul>
            </nav>    
        </div>
    </header>

    <!--main contents-->

    <div id="wrapper">
    <div id="main">

        <h2 class="title">33-4 タイマー</h1>
        <p style="text-align: center;">33と4の和・差で任意の自然数を表すことができるので非常に便利なタイマーとなっています。</p>

        <div id="history">0</div>
        <div id="display">
            <div id="equal">=</div>
            <div id="time">0</div>
        </div>
        <div id="buttons">
            <button id="add33" class="timer_button">+33</button>
            <button id="sub33" class="timer_button">-33</button>
            <button id="add4" class="timer_button">+4</button>
            <button id="sub4" class="timer_button">-4</button>
            <button id="start" class="timer_button">START</button>
            <button id="stop" class="timer_button">STOP</button>
            <button id="reset" class="timer_button">RESET</button>
        </div>
        <script>
            const add33 = document.querySelector('#add33');
            const sub33 = document.querySelector('#sub33');
            const add4 = document.querySelector('#add4');
            const sub4 = document.querySelector('#sub4');
            const start_botton = document.querySelector('#start');
            const stop_botton = document.querySelector('#stop');
            const reset_botton = document.querySelector('#reset');
            const doc_history = document.querySelector('#history');
            const doc_time = document.querySelector('#time');
            
            var time = 0;
            var str_history = "0"

            start_botton.disabled = true;
            stop_botton.disabled = true;
            

            // ここでクリックしたときの処理を書ける
            add33.onclick = () => {
                time += 33;
                botton_updateHistory("+33");
                botton_update();
            }

            sub33.onclick = () => {
                time -= 33;
                botton_updateHistory("-33");
                botton_update();
            }

            add4.onclick = () => {
                time += 4;
                botton_updateHistory("+4");
                botton_update();
            }

            sub4.onclick = () => {
                time -= 4;
                botton_updateHistory("-4");
                botton_update();
            }

            start_botton.onclick = () => {
                start_countdown();
            }

            stop_botton.onclick = () => {
                stop_countdown();
            }

            reset_botton.onclick = () => {
                reset();
            }

            const botton_updateHistory = (str) => {
                if (str_history === "0") {
                    str_history = str;    
                } else {    
                    str_history += str;
                }
                if (str_history.length > 20) {
                    str_history = "..." + str_history.slice(-20)
                }
            }

            const botton_update = () => {
                doc_history.innerHTML = str_history.replace(/33\-4/g, '<span style="color:red">33-4</span>');
                doc_time.innerHTML = time;
                if (time > 0) {
                    start_botton.disabled = false;
                } else {
                    start_botton.disabled = true;
                }
            }

            const reset = () => {
                time = 0;
                str_history = "0";
                start_botton.disabled = true;
                stop_botton.disabled = true;
                botton_update();
            }

            const countdown = () => {
                time--;
                doc_time.innerHTML = time;
                if (time <= 0) {
                    stop_countdown();
                    reset();
                    alert("時間です！");
                }
            }

            const start_countdown = () => {
                timerID = setInterval('countdown()', 1000);
                start_botton.disabled = true;
                stop_botton.disabled = false;
                reset_botton.disabled = true;
                add33.disabled = true;
                sub33.disabled = true;
                add4.disabled = true;
                sub4.disabled = true;
            }

            const stop_countdown = () => {
                str_history = String(time);
                doc_history.innerHTML = str_history;
                clearInterval(timerID);
                start_botton.disabled = false;
                stop_botton.disabled = true;
                reset_botton.disabled = false;
                add33.disabled = false;
                sub33.disabled = false;
                add4.disabled = false;
                sub4.disabled = false;
            }

        </script>

    </div>

    <!--footer-->
    <footer>
        <small>© 2020 d_etteiu8383</small>
    </footer>
    </div>
</body>
</html>
